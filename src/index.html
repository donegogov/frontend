<!doctype html>
<html lang="mk">
<head>
  <meta charset="utf-8">
  <base href="/">
  <title>Солидарност.мк</title>

  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

  <script
  src="https://code.jquery.com/jquery-3.6.0.min.js"
  integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
  crossorigin="anonymous"></script>
  <!-- CSS only -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
<!-- JavaScript Bundle with Popper -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>

  <script>
  function docReady(fn) {
    // see if DOM is already available
    if (document.readyState === "complete" || document.readyState === "interactive") {
        // call on next available tick
        setTimeout(fn, 1);
    } else {
        document.addEventListener("DOMContentLoaded", fn);
    }

    var scrollFlag = true;
    // sticky header
    function stickyHeader() {
                    // variable
                    var $window = $(window);
                        
                        scrollFlagMobile = true;
                        // off the scroll
                        $window.off('scroll');
                        // check if the sticky header true
                            // scroll function
                            $window.on('scroll', function () {
                              menu = document.getElementsByClassName("menu")[0];
                              console.log(menu.offsetTop);
                              console.log(window.pageYOffset);
                              if (window.pageYOffset >= (menu.offsetTop + menu.offsetHeight)) {
                                    // check if flag true
                                    if (scrollFlag === true) {
                                        // fade out
                                        $(".menu").fadeOut(200, function () {
                                            // add class and fade in
                                            $(".menu").addClass('desktopTopFixed').fadeIn(200);
                                        });
                                        // scroll flag false
                                        scrollFlag = false;
                                    }
                                } else {
                                    // check if flag false
                                    if (scrollFlag === false) {
                                        // fade out
                                        $(".menu").fadeOut(200, function () {
                                            // add class and fade in
                                            $(".menu").removeClass('desktopTopFixed').fadeIn(200);
                                        });
                                        // scroll flag true
                                        scrollFlag = true;
                                    }
                                }
                            });
                        };





    document.addEventListener('scroll', function(e){
      stickyHeader();
     }, true);
    
     var matSelectOffsetHeight = document.getElementById("home-city");
     console.log('matSelectOffsetHeight' + matSelectOffsetHeight);
     document.documentElement.style.setProperty('--selectPanelCityMargin', matSelectOffsetHeight + 'px'); //suffix may be px or ''


     

    }
</script>
</head>
<body style="color: rgba(0,0,0,.87); font-family: Roboto, Helvetica Neue, sans-serif;">
  <app-root>
  </app-root>
  <script>
    docReady(function() {
        const body = document.body;
const bgColorsBody = ["#ffb457", "#ff96bd", "#9999fb", "#ffe797", "#cffff1"];
const menu = body.querySelector(".menu");
const menuItems = menu.querySelectorAll(".menu__item");
const menuBorder = menu.querySelector(".menu__border");
let activeItem = menu.querySelector(".active");

function clickItem(item, index) {

    menu.style.removeProperty("--timeOut");
    
    if (activeItem == item) return;
    
    if (activeItem) {
        activeItem.classList.remove("active");
    }

    
    item.classList.add("active");
    body.style.backgroundColor = bgColorsBody[index];
    activeItem = item;
    offsetMenuBorder(activeItem, menuBorder);
    
    
}

function offsetMenuBorder(element, menuBorder) {

    /* const offsetActiveItem = element.getBoundingClientRect();
    const left = Math.floor(offsetActiveItem.left - menu.offsetLeft - (menuBorder.offsetWidth  - offsetActiveItem.width) / 2) +  "px";
    menuBorder.style.transform = `translate3d(${left}, 0 , 0)`; */

    const offsetActiveItem = element.getBoundingClientRect();
        const left = Math.floor(offsetActiveItem.left - menu.offsetLeft - (menuBorder.offsetWidth  - offsetActiveItem.width) / 2) +  "px";
        /* const top = (menu.offsetTop + menu.offsetHeight) + 'px';
        console.log(top); */
        menuBorder.style.transform = `translate3d(${left}, 0, 0)`
        menuBorder.style.transform += `rotate(180deg)`;
        /* menuBorder.style.marginTop = (menu.offsetTop + menu.offsetHeight);
        console.log('menu height ' + menu.offsetHeight);
        console.log('offset top ' + menu.offsetTop); */

}

offsetMenuBorder(activeItem, menuBorder);

menuItems.forEach((item, index) => {

    item.addEventListener("click", () => clickItem(item, index));
    
})

window.addEventListener("resize", () => {
    offsetMenuBorder(activeItem, menuBorder);
    menu.style.setProperty("--timeOut", "none");
});


function clickLeftArrow(leftArrow) {
  if(!leftArrow.classList.contains('rotate-left-anim-wrapper')){
    leftArrow.classList.add('rotate-left-anim-wrapper');
  } else {
    leftArrow.classList.remove('rotate-left-anim-wrapper');
    // Add it back after 3 seconds;
    setTimeout(function(){
        leftArrow.classList.add('rotate-left-anim-wrapper');
    }, 100);
  }
}

function clickRightArrow(rightArrow) {
    if(!rightArrow.classList.contains('rotate-right-anim-wrapper')){
        rightArrow.classList.add('rotate-right-anim-wrapper');
  } else {
    rightArrow.classList.remove('rotate-right-anim-wrapper');
    // Add it back after 3 seconds;
    setTimeout(function(){
        rightArrow.classList.add('rotate-right-anim-wrapper');
    }, 100);
  }
}

var leftArrow = body.querySelector('.left');
console.log(leftArrow);
leftArrow.addEventListener("click", () => clickLeftArrow(leftArrow));

var rightArrow = body.querySelector('.right');
rightArrow.addEventListener("click", () => clickRightArrow(rightArrow));

  });
  </script>
</body>
</html>
